<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Interactive Orthographic Globe (Observable Plot + D3)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { margin: 0; display: grid; place-items: center; height: 100vh; background:#f6f7f9; }
    #container { width: 600px; height: 600px; }
    svg { background: white; border-radius: 10px; box-shadow: 0 6px 18px rgba(0,0,0,0.12); }
    .hint { position: fixed; bottom: 16px; font: 13px/1.2 system-ui, sans-serif; color:#555; }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
</head>
<body>
  <div id="container"></div>
  <div class="hint">ðŸ’¡ Drag to rotate. Double-click to reset.</div>

  <script type="module">
    import * as Plot from 'https://cdn.jsdelivr.net/npm/@observablehq/plot@0.6/+esm';
    import { feature } from 'https://cdn.jsdelivr.net/npm/topojson-client@3/+esm';

    const coords =

[[[[-99.52316615028741, -3.7450437470058215], [-102.31681156298443, -7.3098511437293086], [-106.47391434652876, -6.608494376194796], [-107.80031250106053, -2.5640667726764135], [-109.71988821036106, -2.2812832631930045], [-111.84870286236902, -2.1675662435525274], [-114.02904784459382, -5.242929409571677], [-118.12335777862991, -4.986310192743098], [-120.24551240318443, -1.6912650463504653], [-124.29849277976768, -1.4476428602001996], [-125.88346072177119, -5.21502760786271], [-129.7100658202636, -6.134248764846947], [-132.10150849305654, -3.156710274879981], [-136.27080761114607, -4.045894876233991], [-138.95903110794228, -0.8353130739527114], [-143.3961790952625, -1.706579969821454], [-144.9683236097968, -5.820413131280587], [-149.4028814909321, -6.672537737437516], [-152.3980821982831, -3.4345808068957697], [-156.8531091350144, -4.259065522271725], [-159.93112334382027, -0.9446533902388665], [-164.25615857265893, -1.7743965588128086], [-165.41674992858833, -5.762860491436919], [-169.716819501222, -6.40267724803141], [-170.89762858145173, -4.860811812073258], [-172.34353547812253, -3.2930086626395747], [-176.05696384421353, -3.968796976609587], [-178.01560350077588, -7.529293806652375], [-175.92099346918747, -10.734014957224218], [-178.00946172254558, -14.547282830266626], [-175.76570557732126, -18.098845255143683], [-178.00242433382851, -22.067175689495624], [-175.58667152884377, -25.876899790610707], [-177.99428002774027, -29.865766952798836], [-175.3779980678874, -33.802924798463245], [-177.98474535021083, -37.66435763083125], [-175.13166788498833, -41.58031489516635], [-177.97343103461537, -45.18424868970644], [-174.83648905843094, -48.943763955054905], [-176.36999136090046, -50.610463312569514], [-177.89868601605255, -52.51713397842229], [-174.47635345070967, -55.70676846515228], [-177.80178395942485, -59.383886486983954], [-173.84090406007633, -62.20500536598249], [-176.3000667397121, -64.52560842196837], [-176.6219248703129, -65.7243888731199], [-171.86973896781137, -67.46842788455002], [-168.8667199640939, -67.85995297513011], [-168.0098327233773, -71.26523337833439], [-155.80725235262844, -72.09707420590918], [-150.7925342912893, -75.65094362106626], [-164.32460615388686, -78.79915742230948], [-159.0907444817528, -82.87200197672584], [-124.07451529163777, -82.50396355374549], [-87.34455122467277, -84.24413301148068], [-34.441802308663334, -87.36469532319619], [-7.780834308185192, -83.14393672156828], [-26.191155035564694, -79.31717648987741], [-16.158956222032586, -75.08989276640648], [-25.001755365954338, -71.0720426766047], [-18.70438773465715, -66.94299147138761], [-7.138628601307926, -66.19292316051032], [-4.785398759359998, -61.82981680247969], [-11.22722997525273, -58.62952020387534], [-9.584191833038208, -55.956862850498176], [-8.7291680146373, -54.63456191069657], [-13.55059103563392, -51.32191270194406], [-11.029925556951396, -47.15173201826695], [-4.3790031832176455, -46.180014657090155], [-2.6107760281438304, -41.70426599254369], [-6.849807213223577, -38.30496354724654], [-5.1064452283314585, -33.75764213456773], [-8.870093365769497, -30.224678744640975], [-7.175238133455658, -25.769382636267903], [-2.1530562884085485, -24.756909421354475], [-0.8944928371519195, -20.427514765045647], [-4.255457128460979, -17.214910773697703], [-2.992177352218251, -13.210646854422853], [-6.057176815534761, -10.194121685274], [-4.805183856824203, -6.586859421326589], [-7.615506108749893, -3.845828260484011], [-11.66474754212644, -4.4670316097845], [-13.559193205964707, -0.8762512952424143], [-17.373147196370113, -0.8227221314451982], [-19.325125801816437, -4.604844470308616], [-23.52422244327238, -4.645743871293199], [-25.721264011811797, -0.6931851479671439], [-30.203425049597982, -0.6173843220866737], [-32.528267829318835, -4.649620438680767], [-37.243135362944614, -4.606028555705817], [-39.563133079118444, -0.44748322046602834], [-44.322948507187284, -0.3562094817730327], [-46.800487381563165, -4.422917404204754], [-51.51182762864842, -4.287152921751077], [-53.68204442813005, -0.17017772412858903], [-58.163640147998116, -0.07918007660184663], [-60.50309415506542, -3.9486914533379958], [-63.32276713921543, -3.8221019268338665], [-64.72810407520194, -3.684741680505737], [-67.11855039005962, -7.389406912237246], [-71.61986799886888, -7.003123550980988], [-73.58831704620168, -2.7703025791670175], [-78.21816398026434, -2.2641433736476846], [-80.99438115089971, -6.061929363987141], [-85.74830788668204, -5.520060963403992], [-87.59400415255666, -1.1964275116101613], [-92.21612396381302, -0.6561288240742991], [-95.07033345637271, -4.3484866954754455], [-99.52316615028741, -3.7450437470058215]], [[90.71723526584819, -1.3006030285245258], [87.52859397085601, -4.455546808882523], [83.16385904323403, -3.2418753100088593], [81.18491296412186, -5.250784448542952], [80.14091487099121, -6.2027935014485225], [75.82322591156387, -4.902363341799053], [72.46372397098733, -7.772426211612159], [68.12880718791868, -6.382401917945719], [67.36290022706116, -2.2670217695307624], [63.3061222521409, -0.9781516831001118], [59.88485456478613, -3.625405109717659], [56.04076373667954, -2.3041178869669148], [54.342630992672014, -3.5933241882305116], [52.68952639184418, -4.612860727482492], [49.07628278330157, -2.3547343129537177], [45.43387749209455, -4.428418751970285], [41.58665495463515, -2.0439831300982623], [37.62415943093452, -4.150912683092272], [33.66361927713152, -1.6772949381945044], [29.508441243966416, -3.781047572700436], [25.58678516686, -1.2704435740827693], [21.40032508185986, -3.335734857517352], [17.669408104914115, -0.8469844525190816], [13.611699107391518, -2.8447525350379235], [10.189893676135952, -0.43188476755339716], [6.386373526666488, -2.3418038147608624], [5.789350796390831, -6.624087908058834], [2.0862033788879364, -8.35716171802338], [1.7618400087581727, -10.46324037683844], [1.2793001655038674, -12.343247039532924], [4.541728885974603, -15.285730312483961], [3.6452135373622165, -19.349758459489138], [7.197179188234455, -22.373958345439732], [6.377204029655109, -26.71303973922542], [1.553430171580416, -28.03484063705462], [0.32477422723328586, -32.56540793873001], [4.43567077495152, -35.741206971176496], [3.2761575769758524, -40.31599783007281], [7.859781245317266, -43.217060122954415], [6.82999771802908, -47.67984833396268], [11.961579249863, -50.162272394795856], [11.153993205628135, -54.38852804531911], [4.251781231586496, -56.19652224584304], [3.7941449033998462, -60.34269461019056], [11.872490908645235, -62.65341059232735], [12.808669900673326, -67.0381940847398], [2.2626284426897936, -69.21258919215596], [0.8335679005817301, -73.84381829918738], [16.543131920990525, -76.14556732608257], [21.151786939540855, -80.72172286490245], [49.509760006773256, -80.92220862231946], [77.31582488044734, -83.57676487745285], [101.81683545801518, -87.80824356139658], [162.09183616506857, -84.94207431820972], [145.24158201971542, -81.27137179020501], [159.6908042933129, -77.80316131016781], [153.13247928231416, -73.85617864759341], [160.7671370798629, -70.30015374059282], [172.05743696166337, -70.17612110688735], [175.12130159942038, -66.4250610395259], [169.5550224552217, -63.095054077525454], [174.49766507469988, -59.79185517035779], [171.25910036945749, -56.38258811071852], [175.42161758601702, -52.79243904276302], [172.5394909199373, -49.05681780552429], [176.1293525033045, -45.28676629439397], [173.53581801576217, -41.30855957084678], [176.68865874692344, -37.499409186860944], [174.3327283772542, -33.405709481234645], [177.1417180269033, -29.709916100270615], [174.98441150036325, -25.646518175135377], [177.51613498805204, -22.197541386302387], [175.52711991035227, -18.297332900396515], [176.70743517031633, -16.718980405891966], [177.80629500559556, -14.869645297067576], [175.98600155652952, -11.545295975414763], [178.06043688175902, -8.00719366148785], [176.33760338440166, -5.048182136577354], [175.13738387330054, -5.210610931400808], [172.6216473977064, -4.648343501025622], [170.30471851499902, -7.173126163814265], [166.291853296082, -6.270965136275794], [165.84925104057967, -2.2362517307541014], [162.3206084434784, -0.7857626165462426], [159.11445596529225, -3.586179719894016], [155.2010590098167, -2.0884757961035625], [151.73819615689132, -5.002988319007183], [147.5198718874505, -3.4549175353760195], [143.89793445781356, -6.411812861671425], [139.50821118876502, -4.8099164186777035], [135.85958708181397, -7.725284543519058], [131.46580432259714, -6.071099094574541], [127.93166510631232, -8.86688505875448], [123.69917439607623, -7.171745433550871], [122.89284782634661, -2.7228891610396557], [118.80144676595566, -1.0908183695418654], [115.67172827000326, -3.8245323459249185], [111.64832534337992, -2.7687426994117614], [108.41587913607124, -5.894708224614658], [104.12723993254785, -4.8213435637194655], [100.8349613071672, -7.941423794133487], [96.41687824651858, -6.827381161385126], [95.22669343176798, -2.5046046873156858], [90.71723526584819, -1.3006030285245258]], [[-90.3810974748782, 82.85349004122659], [-125.29445893479551, 82.48154130920912], [-161.89171801085914, 84.22628942426208], [-176.36726611745192, 79.98369865816576], [-163.45686807900944, 76.14556732608257], [-171.11065695414112, 71.97154653078344], [-163.8729684603252, 68.21921734529464], [-169.09171800224814, 64.21420040783376], [-164.0655884448202, 60.72912581441262], [-168.0262941563394, 56.99746478128345], [-175.74821876841355, 56.19652224584304], [-177.04785603399293, 52.113519976620616], [-171.87311046039585, 49.05085282910134], [-173.2513616288856, 44.74985555511408], [-168.8876761772056, 41.53861492567143], [-170.27191812997154, 37.14623592274974], [-175.56432922504848, 35.741206971176496], [-176.54267313535857, 31.148162090824524], [-172.64626329548403, 28.20896181794974], [-173.6703874763115, 23.782822700979136], [-178.22376950605553, 22.092681232201556], [-178.95063664056067, 17.74333218723816], [-175.4582711140254, 15.28573031248396], [-176.35806599111405, 11.05195584369349], [-173.38014762578527, 7.9727938308414075], [-174.31673738369324, 3.8210244943304374], [-171.37544324872502, 0.649870565576401], [-167.31261713417402, 1.5147974903819574], [-166.16940101623453, 5.767146686378417], [-161.77338167921764, 6.766536253596436], [-158.59967491814012, 3.335734857517349], [-154.0294052002189, 4.260374459536214], [-150.91862197114955, 0.7969950664894166], [-146.33638072286848, 1.6772949381945044], [-144.72979242136543, 6.045591181415267], [-140.12125038010964, 6.870649308036964], [-137.3063271216714, 3.372828505596593], [-132.96499017492758, 4.158942627265325], [-130.4608587551884, 0.8436031110165414], [-126.47619542382564, 1.6263637306496364], [-125.65736900732797, 3.5933241882305222], [-124.74319077977674, 5.304322366655776], [-120.47268446128629, 5.165048115302317], [-118.22978761288444, 1.54661270011944], [-113.91041930526723, 1.3300762483231614], [-111.60261207801032, 4.785398917150398], [-107.10416387391813, 4.548448008485299], [-105.17323884809628, 0.8701881901666886], [-101.04824320818962, 0.3854149473714064], [-98.30082499679779, 3.9382989654374976], [-93.91140202136133, 3.4938029769751124], [-91.12007106136942, 7.059508613810285], [-86.58999355148684, 6.605186625257111], [-84.77330656823203, 2.5046046873156858], [-80.13485884440162, 1.9759215335086475], [-77.44069883550374, 5.5631423675199665], [-72.93661775503374, 4.9951927162657395], [-71.0160747003525, 0.901274271496053], [-66.64455573288102, 0.3760386871585963], [-64.32827172999673, 3.8245323459248906], [-60.165868273993155, 3.8426199422059493], [-57.84643084054915, 7.694210873901278], [-53.40381944858905, 7.7522909940025615], [-51.252815863927914, 3.813394894857517], [-46.5899429561277, 3.76138350054279], [-44.14041291818604, 7.725284543519059], [-39.43410523143184, 7.635035982578252], [-37.14019742640149, 3.5803293669296306], [-32.48012811254947, 3.4549175353760115], [-30.182215330720936, 7.309910883327083], [-25.750258419602837, 7.086582997425367], [-23.577254165479836, 3.152670815193172], [-19.42154916686706, 2.985051052916481], [-17.487884167109748, 6.558659438572163], [-13.708146703918002, 6.270965136275773], [-11.830186971127075, 2.638932741201293], [-8.412776379912247, 2.467580053183621], [-7.899841472392981, 3.559837831413195], [-6.064496108778538, 5.362739776582626], [-6.957444601114238, 8.664197475387969], [-4.013998443470464, 11.545295975414753], [-4.866872026589571, 15.219885219398503], [-3.2925648296836485, 16.718980405891937], [-1.7113099039779158, 17.935404581817405], [-2.4838650119479393, 22.197541386302376], [-6.84616569288798, 23.22581044564793], [-8.002013895306675, 27.502908667188287], [-4.34176924715694, 30.69897412778907], [-5.442348460730083, 35.12442405176797], [-1.4162342628377007, 38.1159967227654], [-2.4177958307002183, 42.54047996565121], [-8.101589192291547, 44.0506310521871], [-9.724736207832674, 48.43009421958324], [-4.889760342933783, 51.22372845966178], [-6.436337296790293, 55.37739041554851], [-0.931587163510601, 57.68949737459286], [-2.2975260876218146, 61.54550957788075], [-10.444977544778341, 63.095054077525454], [-10.558792289389459, 67.1535478452051], [-19.871380589088925, 68.6781104931821], [-22.407627638775807, 72.92129484534789], [-10.985283977307283, 75.5580182962511], [-11.18274950256939, 77.68777876614904], [-10.416534576215849, 79.62054525867497], [-34.75841798028471, 81.27137179020501], [-51.70487751530809, 84.93555635380528], [-90.3810974748782, 82.85349004122659]], [[14.81365872582757, 67.35176867523612], [8.130261032188706, 67.46842788455002], [5.239258880169461, 67.01563262841769], [3.699933260287894, 64.5256084219684], [4.012620898449968, 63.3270613280184], [8.644221197607186, 61.8908384753262], [11.080660058482366, 61.5405146000252], [11.555977692900699, 58.130531165851394], [5.52364654929031, 55.70676846515228], [6.259687055981994, 51.96477015603749], [3.6300086390995316, 50.610463312569514], [1.188509553443467, 49.47027919866874], [2.026568965384611, 45.18424868970644], [7.50994848192889, 43.78660935394502], [8.045142114241342, 39.40213636897177], [3.5435893569877903, 36.59789814478598], [4.204173995672652, 32.11010693139568], [0.2609468260311212, 29.30037465923498], [0.9946771925498358, 24.85833583444955], [5.3675737051231645, 23.01114705036288], [5.882262995803539, 18.516052400096086], [2.302842809205857, 16.098688642959495], [2.88810760150022, 11.881770859938996], [6.801169317009782, 9.899743070823428], [7.212914562720072, 5.860392168376587], [9.102371418548282, 4.860811812073258], [10.722777827285633, 3.789624991750129], [14.583250071411674, 5.762860491436915], [18.09981644071494, 3.5346227999232194], [22.136132249356994, 5.527020080114615], [25.886010570251138, 3.202074339142956], [29.961298273611618, 5.1819226249528905], [33.814945033944454, 2.8026599483934844], [37.77676428812329, 4.74095538189142], [41.59000566215463, 2.3586899160008272], [45.30258805566046, 4.232719683025157], [48.94706885744921, 1.898270439192623], [52.316592444657616, 3.6927532541940127], [55.70150722023228, 1.4476428602002083], [58.9668320668832, 3.9090460692491074], [62.72776317867667, 2.7916780404471604], [65.97095215540618, 5.242929409571677], [69.63381057288798, 4.311473809758376], [72.19363429195394, 7.473863638092713], [76.26408541439847, 6.511600732441479], [77.5983036432562, 2.2233436292223394], [81.85307387147245, 1.084853908628409], [84.9296665436273, 4.348486695475442], [89.44185686196764, 3.1743094571295885], [92.75068396053875, 6.523960823111651], [97.37304065193962, 5.289412273297663], [100.80136063472526, 8.618890658103629], [105.35716758404885, 7.303218576160169], [106.41168295379833, 2.7703025791670135], [110.72399425598124, 1.5358657755021414], [113.98513214459506, 4.6721309865719345], [116.67723286078457, 3.8221019268338448], [117.99888533923311, 3.3267128731190114], [121.26764633911117, 6.289184675341438], [125.50231533878872, 4.763431183575369], [129.04492009156368, 7.805398745803346], [133.49441060685513, 6.197676527808861], [137.1970727246292, 9.231452670299692], [141.69432910913807, 7.537486471095007], [142.43997538991445, 2.835154500117894], [146.82860631815936, 1.146470566433399], [150.44123001544202, 4.084015752678349], [154.59893532317398, 2.3920322085174726], [158.00676432627483, 5.1890555165121155], [161.81561480968847, 3.5081042246681515], [164.93539603741021, 6.119591258608642], [168.33525245787357, 4.467031609784497], [172.03418236939353, 6.172978893164637], [175.46041201203371, 4.248592317017825], [179.2171608248945, 5.88992175431389], [179.77693144202632, 9.615942399155198], [176.28993210653294, 11.794175727566111], [176.7615924622716, 15.921990549108143], [172.88878640797157, 18.30669067889132], [173.23062212965775, 22.777763428069576], [177.84694371159145, 24.75690942135447], [178.4754053347224, 29.376139351007172], [174.02804175387834, 32.1119243692579], [174.49688633843544, 36.85680682151307], [169.44151026908685, 39.479372566043565], [169.66101739290986, 44.17622039141847], [175.6209968167824, 46.180014657090155], [176.3024402828945, 50.63969712744497], [170.19881569013583, 53.14363558473362], [170.41580816696182, 55.956862850498176], [170.6673809942136, 57.359097831564405], [163.34704729720406, 59.5364130976333], [163.0408721046586, 64.01659592046677], [172.86137139869209, 66.19292316051032], [174.7489392452071, 70.79472682488495], [161.9120756666221, 73.36886176605667], [160.68630381362877, 78.12011723529922], [136.93797037496347, 79.32046590614668], [118.57660603902232, 83.15405442466329], [145.5581976913369, 87.36469532319619], [8.384360674741012, 87.82361750161158], [33.23852823745463, 83.59754993234792], [13.88006441861331, 80.34595244233691], [23.46937321934182, 76.53550099989292], [14.551845028116844, 73.4874564977175], [20.59724429383507, 70.05215151950884], [14.81365872582757, 67.35176867523612]]]]

;


    const poly = {
      type: 'Feature',
      properties: { name: 'Rough CONUS outline' },
      geometry: {type: 'MultiPolygon', coordinates: coords}
    };

    // ---- State for interactivity ----
    const state = {
      rotate: [100, -40, 0],   // roughly centers the U.S.
      width: 600,
      height: 600
    };

    // Load coastlines (land) once and convert TopoJSON -> GeoJSON
    const landTopo = await (await fetch('https://cdn.jsdelivr.net/npm/world-atlas@2/land-110m.json')).json();
    const land = feature(landTopo, landTopo.objects.land);

    function preview(geometryOrFeature, rotate) {
      return Plot.plot({
        width: state.width,
        height: state.height,
        projection: { type: 'orthographic', rotate, inset: 1 },
        marks: [
          Plot.geo(land, {
            stroke: '#88b',
            fill: 'none',
            strokeWidth: 0.8,
            strokeOpacity: 0.8
          }),
          Plot.geo(geometryOrFeature, {
            fill: 'red',
            fillOpacity: 0.45,
            stroke: 'red',
            strokeOpacity: 0.7
          }),
          Plot.graticule({ strokeOpacity: 0.06 }),
          Plot.sphere({ strokeWidth: 2 })
        ]
      });
    }

    const container = document.getElementById('container');

    let frame = null;
    function render() {
      if (frame) return;
      frame = requestAnimationFrame(() => {
        frame = null;
        container.innerHTML = '';
        const svg = preview(poly, state.rotate);
        container.appendChild(svg);
        attachDrag(svg);
      });
    }

    function attachDrag(svg) {
      const drag = d3.drag()
        .on('start', (event) => {
          drag.startX = event.x;
          drag.startY = event.y;
          drag.startRotate = state.rotate.slice();
        })
        .on('drag', (event) => {
          const dx = event.x - drag.startX;
          const dy = event.y - drag.startY;
          const k = 0.25;
          state.rotate = [
            drag.startRotate[0] + dx * k,
            drag.startRotate[1] - dy * k,
            0
          ];
          render();
        });

      d3.select(svg).call(drag);
      d3.select(svg).on('dblclick', () => {
        state.rotate = [100, -40, 0];
        render();
      });
    }

    render();
  </script>
</body>
</html>
